<!DOCTYPE html>
<html>
<head>
<meta charset="Shift_JIS">
<title>FMR-CARDのページ -- もしかしたら開発室</title>
<style>
<!--
	/* 全体的な */
	* {
		margin:0;
		padding:0;
	}
	body {
		font-family:monospace;
		font-size:16px;
		color:#FFFFFF;
		background-color:#000000;
		margin-left:8px; margin-right:8px;
		line-height: 1.4;
	}
	h1 {font-size:28px; margin-top:16px; margin-bottom:16px; padding:8px; text-align: center; color:#000000; background:#C0C0C0;}
	h2 {font-size:24px; margin-top:3ex; padding:8px; border-top:1px solid #C0C0C0; border-bottom:1px solid #C0C0C0; width:100%;}
	h3 {font-size:20px; margin-top:1ex; padding:8px; border-bottom:1px solid #404040; width:100%;}
	h4 {font-size:16px;}
	
	p {margin-top:0.5ex; margin-bottom:1ex; text-indent: 1em;}
	
	table {font-size:14px; margin-left:10%; margin-right:10%; margin-top:3ex; margin-bottom:3ex; border-collapse:collapse; border:1px solid #C0C0C0;}
	th {padding:2px; border:1px solid #C0C0C0; background:#404040;}
	td {padding:2px; border:1px solid #C0C0C0;}

	/* 特定用途用 */
	.body {margin-right:5%;}
	.block {margin-top:1ex; margin-bottom:3ex; margin-left:1em;}
	.list {margin-top:0.5ex; margin-bottom:1ex; margin-left:3em;}
	
	.memo {display:table; border:1px solid #808080; margin-left:10%; margin-right:10%; margin-top:2ex; margin-bottom:2ex;}
	.memo_blk1 {display: table-cell; padding:8px; white-space:nowrap; font-weight:bold;}
	.memo_blk2 {display: table-cell; padding:8px; font-size:14px; margin-right:10%; color:#E0E0E0;}

	.header {text-align:right; font-size:12px;}
	.footer {margin-top:2ex; padding:8px; border-top:1px solid #C0C0C0;}

	/* リンクスタイル */
	a:link {color:#8080FF;}
	a:visited {color:#C0C0C0;}
	a:active {color:#FF8080;}
-->
</style>
</head>

<body>
<h1>FMR-CARDのページ</h1>
<div style="text-align: center">
	<img src="./image/rcard/rcard_00.jpg" alt="FMR-CARDの雄姿(REDにてテキスト編集中)">
</div>

<div class="body">
<h2>はじめに</h2>
<div class="block">
	<p>このページでは、FMR-CARDという伝説のノートマシンについてまとめています。</p>
	<p>調べられる範囲で書いてみましたが、自分は本体だけを購入した(=マニュアルを持っていない)ので間違いなどがあるかもしれません。もし、おかしい記述がありましたら<a href="http://development-room.bbs.fc2.com/">ゲストブック</a>等で正しい情報を教えて頂けると有りがたいです。</p>
	<p>ちなみに、上の写真以外にも何枚か写真を撮ったので、詳しい写真を見たい方は<a href = "./fmr-card_f.htm">こちら</a>へどうぞ。</p>
</div>

<h2>FMR-CARDとは?</h2>
<div class="block">
	<p>FMR-CARDは1991年に富士通から発売された、当時としては常識はずれの携帯性・機動性を実現したノートマシンです。
	ボディはA4サイズで厚さ24mm、重さもたったの990gという軽量薄型を達成しており、タブレット等が闊歩する現代でも持ち歩きに不自由しません。バッテリには単三電池が採用されており、アルカリ電池2本で約8時間連続動作させることができます(ニッケル水素のような二次電池も使えます)。このため、応急的に電源を確保するのも容易ですし、「バッテリがヘタったけど専用品がディスコンでどうにもならん」といった心配も無く末永く使うことができます。</p>
	
	<p>単純に「単三電池で動く携帯電子計算機」というだけであればポケコンとかOASYS Pocket3とか他にも選択肢はあるわけですが、このFMR-CARDには「パソコンであるFMR-50シリーズとのソフト互換性が極めて高い」という利点があります。物理的には画面表示の色数が少ない等、多少の違いはありますが、FBIOS互換やI/Oポート互換(RTC周りや省電力関連の追加ポートを除く)がありますので、例えばテキストエディタ(REDとか)やターミナルソフト等は勿論、(配色次第では)グラフィック画面を使うようなソフトまで大抵そのまま使うことができます。特に、こういった「元々デスクトップPCだったシリーズのハンドヘルド版」というと、軽量化や低消費電力化の代償として画面サイズの違いやI/O周りの致命的な非互換があったりして、使えるソフトがかなり制限されることも多いので(例えばPC-98HAとか)、それらに比べると幾分か恵まれた環境と言えます。</p>
	
	<p>OSは内蔵ROM上に搭載されており(MS-DOS ROM。つまり、別にOSを用意する必要はありません)、標準の外部媒体としてICメモリカードスロット(2スロット)を採用する等、フロッピィブート全盛期の当時としてはかなり挑戦的な割り切りがなされていましたが、ソフト資産があるといっても所詮FMR系ですし、やっぱり単体でフロッピィディスクが扱えなかったのは致命的だったようで、この路線は実質単発で終わってしまいました(マイナーチェンジ版のFMR-CARD/Eが出たのみ。他にFMR-50CARDというのもありましたが、ただ薄いだけの50系ノートのようです…)。</p>

	<p>現在は、メモ書き程度なら「ポメラ」などの素敵なモノが出ていますし、バリバリ使うなら、普通のノートマシンを「バッテリ寿命毎に使い捨てる」選択肢も現実的になってしまいましたので、親指シフターでもない限り、わざわざFMR-CARDに目を向ける必要は無いのかもしれませんが、FMR系ではあるものの「単三電池で動き、パソコンとしての能力を兼ね備えている」ことに関しては、記憶に留めておくだけの価値はある機体ではないかと思います。</p>
</div>

<h2>使ってみて思うところ</h2>
<div class="block">
	<p>実際に使ってみて思うところをざっくりまとめておきます。まず、「今でも関心できる」と思うところですが、以下のような感じです。</p>
	<ul class="list">
		<li>「単三電池2本で8時間」はやっぱり偉大。
		<li>ACアダプタ駆動も可能。ジャックがEIAJ極性統一プラグのものなので、結構何でも使える。
		<li>薄さ・軽さ・大きさには不便を感じない。
		<li>モータのような機械的な部分が存在しない(所謂フルシリコン)。
		<li>親指シフトキーボードモデルもある。
		<li>起動時間が短い。ROM DOSのブートまでほんの数秒。
		<li>DOS上で動作するFMR用のソフトは大抵そのまま使える(白本に載っているレベルのI/Oポートは、だいたい50系と互換性があるみたい)。
		<li>DOS ROMのOAKは連文節変換対応。
		<li>反射形液晶なのでバックライト切れの心配がない。
		<li>FMRの全てのキーが扱える、丁度いいピッチのキーボード。
		<li>キーボードのPOWERボタンでレジュームができる。
		<li>時計やSETUP設定記録用に別途電源が載ってるみたい?(電池を外しても、設定はきっちり残っている)
	</ul>

	<p>逆に、使っていて残念に感じるところもあります。</p>
	<ul class="list">
		<li>ICメモリカードという、絶滅危惧種のストレージしか使えない(PCMCIAとピン互換だが、<b>非ATA</b>専用)。
		<li>キーボードが薄すぎて辛い。やたら固い。音もうるさい(音は対策可)。
		<li>電池が怪しくなってくると挙動不審になることがある。
		<li>OAKの連文節変換が無茶苦茶遅い。しかも単文節変換専用にできない。
		<li>ROMのDOSからしかシステムを立ち上げることができない。
		<li>FM-OASYSはFMR-CARD専用のものが必要(50系ノート用は使用不可)
		<li>搭載メモリが少ない640KB(純正オプションで2MBのEMSメモリがあるようだが…)。
		<li>モノクロ2色なので、画面上の配色によっては文字が見えないことがある。
		<li>ヒンジの部分の、液晶と本体を結ぶケーブルが断線しやすい。
		<li>RS-232Cを使うと電池が持たない。
		<li>何か拡張しようとすると、必ずEXT端子を使用する羽目になる。
	</ul>
	<p>こんな感じでしょうか。</p>

	<p>私は普段電池駆動させているので4MHzモードにしているのですが、動作は意外と軽快です。画面のスクロールも、CPU停止の設定を入れている場合(後記)	は多少がたつきますが、それ以外では思ったよりスムーズです。この辺は流石テキストVRAM搭載機といったところ。</p>

	<p>液晶の挙動は、ゲームボーイ(初代/ポケット)とそっくりです。特に電源を切ったときに現れる横棒1,2本など。反応速度も似たような物だと思います(バラしたときの記憶ではシャープ製でした)。さすがに古い液晶なので、最近のものに比べると視野の広さやコントラスト・反応速度等で遥かに劣りますが、反射式のおかげか、長時間画面を見ていても目が疲れにくいと感じます(個人的にバックライト付きの液晶は苦手で…。PC画面もCRT→LEDプロジェクタにした位ですし…)。反転表示モード(白バックにするか黒バックにするか)やコントラスト調整が行えるのもポイントです。

	<p>今となっては外部記憶媒体が最大のネックかもしれません。ICカードスロットには非ATAのメモリカード(主にSRAMカード)しか使えないので、SRAMカードを扱える機械が別にあったほうがいいです(例えばFM TOWNS等)。一応、このICメモリカードはPCMCIAの前身規格にあたるそうなので、PCMCIAスロットが内蔵されているノートマシンではSRAMカードの読み書きができたと記憶しています(手動でOS標準のメモリカードドライバを突っ込めばOK)が…今見てみたらWin7にはドライバが入ってなさそうですねぇ…(「メモリ テクノロジ ドライバ」クラスの「汎用 PCMCIA メモリ カード」ドライバが見つからない…)。そもそも内蔵スロットのPCMCIA自体が既にレッドリスト入りしているような状態なので、それ以前の問題かとは思いますが。幸い、最近ではUSB接続のPCカードリーダライタ(SRAMカードにも対応しているもの)がいくつか出回っているそうなので、そちらを別途準備するのが吉かと思います。なお、純正専用オプションのドッキングステーション(のようなもの)や外付けFDDを用いた場合はその限りではありませんが、今やどちらも(本体以上に)入手困難なので割愛します(持ってないし)。</p>

	<div class="memo">
		<div class="memo_blk1">ICメモリカードスロットの詳細</div>
		<div class="memo_blk2"><p>FMR-CARDのICメモリカードスロットはJEIDA ver4.0対応なので、ハード的にはATAメモリカード(CFなど)等もアクセスできるのですが、制御方法がSRAMカードとは全く違う為、標準では読み書き出来ません。</p>
		<p>DOS ROMのOASYS.COMを逆汗してみたところ、どうもR-CARDではA000:0000〜A000:FFFFにICメモリーカードが繋がっている(I/Oポートでバンク切替するらしい)ようです。本来ならここにはRAMがあるはずなので、ここを使うプログラムは要注意です(多分これが原因で搭載メモリが640KBなんでしょう)。また、ICメモリーカードのアクセス方法がFMR-50系のノートマシンと違うはずなので、そこを直叩きするプログラムは使えないと思います。少なくとも、FMR-50系ノート用のFM-OASYS(V1.0 L21)は起動してくれませんでした…。他のレベルだと大丈夫だったりするのでしょうかね? ちなみに、E000:0000〜の64KBと、F000:0000〜の64KBは、それぞれ内蔵ROMに繋がっています(ROM自体は同じもの)。I/Oポート経由で別々にバンク切替可能です。</p></div>
	</div>

	<p>ACアダプタのコネクタがEIAJ極性統一プラグ(3V)なので、その辺に転がっているもので適合するものが数多く存在します(純正品はDC3V 出力電流1Aのものですので、電流がこれ以上取れるものであればOKです)。よって、ACアダプタの入手にはほとんど困りません。ちなみに、私は近所の家電屋で売っていたソニーのACアダプタ(AC-E30A…多分スイッチングタイプ)を使っています。一つ注意事項として、個体差かもしれませんが、うちの機体ではコネクタが接触不良を起こしやすいようです。ACアダプタ駆動時にも電池を差しておくと、こちらが抜けたときに自動的に電池駆動に切り替わりるようなので安心できます(挙動としてはACアダプタ側優先のようです)。</p>

	<p>DOS ROMのOAKは、単文節変換の範疇で使っている分には軽快なのですが、連文節変換はやたら遅く操作しづらいので困ります。どうやらこいつはOFFにできないようで、変換時に「単文節でない」と判定される(辞書に無い単語を入れる等する)と自動的に連文節変換をしてしまいます(無理やりOFFにする方法をご存じの方は教えて頂けると嬉しいです)。</p>
	  
	<p>キーボードはちょっと辛いと感じます。どうも、80年代のFMR系のキーボードの雰囲気(押下圧力や音等)を薄いキーボードで再現すべく工夫した形跡があるのですが、深さがないのに押下圧を必要とするので必然的に固く感じ、打鍵音が出るおかげで外では使いづらかったりと、色々と裏目に出てしまっている感があります。特に親指シフト入力の場合は2つのキーを同時打鍵するので、固さの影響が大きく、かなり誤打鍵が増えてしまいます。キートップの裏にコピー用紙(大きさを合わせて、中央に穴を空けておく)を挟み込んでおくと、少しソフトタッチにすることができます(<a href="./image/rcard/rcard_kbd2.jpg">参考写真</a>。元々は<a href="./image/rcard/rcard_kbd1.jpg">こんな感じ</a>になっています)。同時に、打鍵音も小さくできます。</p>
	  
	<p>電池の残量警告機能がついている(電圧が下がると画面右下に警告が出たり、音が鳴ったりします)のですが、どうも一定電圧未満でシャットダウンするような機能はついていないようです(このため、電池の過放電に注意が必要です)。よって、あんまり警告を無視して使い続けていると、徐々に不審な挙動を起こし始めます。例えば、CPU周りが先にやられれば、変な例外を吐いて落ちることがあります。また液晶や液晶ドライバ等の方が負けると、画面が危ない乱れ方をします。しかも、こちらの場合はあわててリセットしてもメモリカウント画面で同じ症状を起こすので、精神衛生上相当タチが悪いです(笑)。当然、低電圧動作による一時的なものなので、電池交換したりACアダプタを繋げば復帰します。</p>

	<p>内蔵ポートはかなり割り切られており、RS-232Cが1個と拡張スロットが1つしかありません。例えば、プリンタを使うには拡張スロットに純正オプションのセントロニクスポートを取り付けるしかありません(しかも5V動作中しか使えないんだとか)。この純正オプションは色々あったようで、他にも、前述のドッキングステーションやFDD、拡張EMSメモリ(2MB)、大容量バッテリ等が存在したようです。また、後述するLANアダプタもありました。しかし、いずれも流通量は少なかったと考えられ、まず本体以上に入手困難だと思います。</p>

	<p>また、FMR-CARD唯一の物理的弱点とも言えるのが、ヒンジの部分にある、液晶と本体とを結ぶフレキシブルフラットケーブル(以下FFC)です。
	詳しいことは後記します。</p>
	  
	<p>使ってみて思いついた点といえばこんなもんでしょうかね。</p>
</div>

<h2>仕様</h2>
<div class="block">
	<p>マニュアルが無いので、分かる範囲だけ書いておきます。</p>
	<table>
		<tr><th>型番</th>		<td>FMR-NBC1A(JIS)/FMR-NBC1B(親指)</td></tr>
		<tr><th>CPU</th>		<td>80C286 8MHz(5V昇圧駆動時)/4MHz(3V駆動時)</td></tr>
		<tr><th>メインRAM</th>	<td>640KB</td></tr>
		<tr><th>画面</th>		<td>モノクロ反射型液晶ディスプレイ(640×400ドット、二階調。コントラスト調整可)</td></tr>
		<tr><th>外部端子</th>	<td>EXT端子×1, RS-232C×1, ICメモリカードスロット×2</td></tr>
		<tr><th>電源</th>		<td>単三アルカリ電池2本(約8時間稼働可能) 又は ACアダプタ(DC3V 1A)</td></tr>
		<tr><th>大きさ</th>		<td>295×210×26.5mm</td></tr>
		<tr><th>重さ</th>		<td>約990g</td></tr>
	</table>
	<p>ちなみに、マイナーチェンジ版のFMR-CARD/Eでは、CPUの高速化(最大12MHz?)と電源管理の強化(RS-232C使用時)、内蔵RAMの増量(1MB。ようは裏RAMが使えるようになった?)、ROM収録ソフトの変更などが行われたようです。</p>
</div>

<h2>互換性</h2>
<div class="block">
	<p>FMR-CARDはその名の通り、他のFMRシリーズとの互換性を有していますが、恐らく軽量化・省電力化の為、一部互換の無い部分が存在します。</p>
	<ul class="list">
		<li>モノクロ2階調表示しかできない。16色データの内、上位3ビットは無視される。
		<li>そもそもVRAMが1バンク2画面しか存在しない(50系では通常4バンク2画面)。
		<li>メインRAMを640KBしか搭載していない(VRAM裏やROM裏のRAMが無い、一部をICカードバンクとして使用)。
		<li>というより、上位側のメモリマップは全く別物(A000:0〜=ICMC、E000:0〜F000:FFFF=ROM)。
		<li>RTC関連の石と制御方法が全く別物。
		<li>キーボードコントローラも別物のようだが、似たような制御で扱えるようになっているらしい(なので、実用上困ることは無さそう)。
		<li>FMRノート用に拡張されたI/Oポートが存在する(0x4000番台…電源管理やメモリバンク制御、液晶制御等)。
	</ul>
	<p>この中で一番影響が大きそうなのはVRAM構成の違いでしょうか。元々の配色によっては上手く表示できない(見えない)可能性があるので注意が必要です。その他、I/O周りはFBIOSを使っている限り問題はありませんし、MS-DOS上で使っている分にはメモリマップの心配も不要かと思います(RTC関係なんかは、普通の使い方だとDOSのシステムコールで間に合いますよねぇ…)。直接I/Oを叩きたくなりそうなタイマやRS-232C・グラフィック周りのI/Oは(確か)互換でしたので、こちらも問題はありません。…ということでこの影響をモロに受けるのはFM-OASYS位だと思われます(笑)。</p>
</div>

<h2>便利な機能</h2>
<div class="block">
	<p>使っているうちに発見した機能をまとめてみます。</p>

	<h3>二つの電源スイッチ</h3>
	<div class="block">
		<p>FMR-CARDを初めて目にして電源を入れようとしたとき、真っ先に目につくのはキーボード上の「POWER」キーです。「ソフトキータイプの電源スイッチとは洒落やがって」とお思いの方もいらっしゃるかもしれません。実際、FMR/FM TOWNSではI/Oポート経由でソフト的に電源を落としたり(DOS上ではPOFFコマンドを使って電源を切るのが風習ですね)、RS-232C経由で電源を落としたりすることができますので、その延長線として考えれば自然な対応です。</p>

		<p>ところが、FMR-CARDにはよく見るともう一つ、スライドタイプ(物理タイプ)の電源スイッチが存在しており、ACアダプタ端子の横にさりげなく配置されています。ようはATX電源部の物理スイッチみたいなものなのですが、ここをスライドさせただけでも、POWERキーを押さずに電源を入れることができます。それならキーボードのPOWERキーは何のために? と思われるかもしれません。</p>

		<p>実はこれ、サスペンド・レジュームボタンなのです。作業中にPOWERキーを押すと、一見普通に電源が落ちたような挙動をしますが、もう一度POWERキーを押すと無事にレジュームします。普通に電源を入れておくより消費電力は遙かに小さいはずなので、電池残量が危険なとき等は上手く使うと効果的です。当然ながら、この状態で元電源を切ってしまったり電源供給を止めてしまうと、レジューム出来なくなってしまうので要注意です。</p>

		<p>また、POFFコマンドで電源を切った場合、元電源を切るまではPOWERキーで再び電源を入れる事が出来ます(メモリカウントから動作)。つまり、物理スイッチを入れっぱなしにしておけば、一般的なFMR/TOWNSと同様の使い勝手になります。但し、この場合は一部のロジックが通電されっぱなしになりますので、間違ってこの状態で放置しておくと知らない間に電池が放電しきっていたりして危険です。長時間使わない場合はスライドスイッチ側で電源を切っておくと良いと思います。</p>
	</div>

	<h3>NBパネル(と思われるメニュー)</h3>
	<div class="block">
		<p>DOS ROMを起動した状態で、FMキー+PF12キーを押すと現れるメニューです。以下の項目について設定することが出来ます。</p>

		<h4>画面反転</h4>
		<div class="block">
			<p>画面をデスクトップ機のように黒地に白表示にするか、デフォルトの白地に黒表示にするかを選べます。</p>
		</div>

		<h4>CPU自動停止時間</h4>
		<div class="block">
			<p>操作されなくなってから(最後に割り込みが発生してから?)、指定秒後にCPUが動作を停止するように設定できます。CPUが停止している間は消費電力が低減されますが、多少動きがもっさり・ガタガタになります。禁止することも出来ます。禁止の状態でずっと使っていると、電池が熱くなります(DOS時代のソフトは割込待ちでHLT命令を使ってないのか??)。</p>
		</div>

		<h4>自動パワーオフ時間</h4>
		<div class="block">
			<p>操作されなくなってから(最後に割り込みが発生してから?)、サスペンド状態に移行する(キーボードのPOWERキーを押したときの挙動と同じ)までの分数を設定できます。無駄な電力消費を抑えることが出来ます。サスペンドした場合はPOWERキーを押せばレジューム出来ます。</p>
		</div>

		<h4>RS-232CパワーON</h4>
		<div class="block">
			<p>これはRS-232Cドライバに電源を常時供給するのか、使用時のみ供給するのかどうかの設定との事です。常時供給のほうが消費電力が多いようです。教えてくださったAuO2さん、ありがとうございました! 尚、直接RS-232C関連のI/Oポートを叩くソフトを使う場合は、常時供給するように設定して下さい。</p>
		</div>

		<h4>低消費電力</h4>
		<div class="block">
			<p>CPUを8MHz駆動にするか4MHz駆動にするか、という設定みたいです。8MHz駆動時はロジック系が5Vに昇圧されるそうです。当然、4MHz駆動のほうが電池の持ちが良いです。尚、ICメモリカードのロジックは5V系ですので、4MHz駆動に設定していても、カードアクセス時は一時的に低消費電力が外れるようです。</p>
		</div>

		<h4>システムファイルデバイス</h4>
		<div class="block">
			<p>CONFIG.SYSとAUTOEXEC.BATがあるデバイスを選択できます。DOSのSETUPコマンドでも同じ設定が出来ます。</p>
		</div>

		<h4>ICメモリカード電池交換</h4>
		<div class="block">
			<p>電池交換が出来るように、一時的にメモリカードへ電源供給してやるための項目です。これを使って電池交換を行えば、中身を消さずに交換することができます。</p>
		</div>
	</div>

	<h3>コントラスト調整</h3>
	<div class="block">
		<p>FMR-CARDでは、液晶のコントラスト調整をソフト的に行います(最近のノートマシンみたいですね)。具体的には、FMキー+PF10キーでコントラストを濃く、FMキー+PF9キーでコントラストを薄くできます。NBパネルの「画面反転」と組み合わせれば、尚見やすさ調整が可能かと思います。</p>
	</div>

	<h3>BEEP音の消し方</h3>
	<div class="block">
		<p>これもAuO2さんから教えて頂きました。ありがとうございました!</p>
		<p>FMキー+SHIFTキー+PF11キーでON/OFFが可能です。ONになる時はBEEP音が鳴ります。DOS ROMに入っているNBSETUP.EXEでも設定できるそうですが、うちの機体には入っていませんでした。AuO2さんのR-CARDは無印ではなく/Eとのことなので、若干内容が違うのかもしれません。</p>
	</div>
</div>

<h2>ケーブル断線の修理方法</h2>
<div class="block">
	<p>上でも少し書きましたが、この計算機の数少ない物理的弱点が、ヒンジの部分にある、液晶と本体を繋ぐFFCです。この部分が、何度も開け閉めを繰り返すことで、断線してしまいます。自分のFMR-CARDもこの部分が断線していたため、電源が入らないと勘違いされて(液晶が映らないと、DOSからechoコマンドでBEEP音を鳴らしたりしない限り、電源が入ったか区別が付きません)ジャンク品として売られていた物です。</p>
	<p>それでは、自分がFMR-CARDを復活させた方法を書いてみます。あくまでも、自分が買った機体の故障原因がこれだったというだけなので、液晶が映らなくなったからといって、原因がこれだとは限りません(ROMが死んでるとか、他にも可能性は色々あるかもしれませんので…)。もし挑戦されるのであれば、他の原因でないかを念入りに調べておく必要があると思います。</p>

	<h3>FFCの購入</h3>
	<div class="block">
		<p>まずは破損したケーブルの代替となる、FFCの調達です。</p>
		<p>FFC自体は、皮膜のうえに回路がプリントされているFPC(フレキシブルプリント配線板)とは異なり、等しく並列に並んだ導体をテープ状のプラスチックで挟んで固定したものですので、所謂汎用品です。よって、導線が正しくつながりさえすれば、純製品と全く同じものである必要はありません。つまりはFPCが断線した場合に比べれば、遙かに代替部品の入手難易度が低いことになります。こんなありがたい作りにした開発者の方々に感謝感謝。</p>
		<p>さて、このFFCの入手先ですが、富士電工という会社が個人相手にも通信販売してくれています。私はこちらで購入しました。以下の仕様を満たすケーブルを購入して下さい。</p>

		<table>
			<tr><th>ピッチ</th>			<td>1.0mm</td></tr>
			<tr><th>芯数</th>			<td>最低24芯</td></tr>
			<tr><th>長さ</th>			<td>275mmに近いもの</td></tr>
			<tr><th>補強板の方向</th>	<td>Kタイプ(同一方向に補強板がある物)。K1でも問題なさげ。</td></tr>
			<tr><th>補強板の長さ</th>	<td>6mmに近いもの</td></tr>
			<tr><th>端子の長さ</th>		<td>4mmに近いもの</td></tr>
			<tr><th>導体厚</th>			<td>適当</td></tr>
			<tr><th>折加工</th>			<td>不明。○なら折り曲げられているのかもしれない。自分は×のものを購入。</td></tr>
			<tr><th>シールド加工</th>	<td>純製品の場合はシールドがあるが無くてもよさげ。</td></tr>
		</table>

		<p>上記の仕様は、断線した純正品を自分で調べたものです。買ったケーブルの芯数が24芯よりも多い時は、余分な端子を切って使えば問題ありません。長さも、純正品は大分余裕があるので、ある程度(3cmぐらい)短くても問題ないと思います。ピッチと補強板の方向だけは、必ず上で指定したものにしてください。</p>
	</div>

	<h3>バラす</h3>
	<div class="block">
		<p>ケーブルが用意できたら、いよいよR-CARDをバラします。作業中の写真は撮っていませんでしたので、以下文章説明でご勘弁を…。</p>
		<p>まずは、富士通のロゴが印刷されている覆い(電池入れの周辺)を外します。ツメで止められているので、折らないように注意して下さい。電源スイッチ周辺のツメはかなりしぶといですが、他の部分は意外とすんなり外せるかと思います。</p>
		<p>覆いを外して、基板の一部(圧電ブザーや小さい電解コンデンサがある)が見えたら、液晶部分と本体とがネジ止めされているのと、グチャグチャになったFFC(とシールド)を目撃できるかと思います。この液晶とFFCを取り外します。ケーブルはコネクタで繋がっていますので、コネクタのロックを解除して抜いてください。</p>
		<p>さて、本体から別れた液晶部分ですが、これも中身も取り出すためにツメを外します。こちらのツメは、全体的に本体のツメよりもしぶとい上に、すごく折れやすいので、慎重に作業する必要があります。実際、自分も何箇所か折ってしまいました…。また、全て外す必要はなく、上部分と横部分だけ外してしまえばOKです。</p>
		<p>外すことが出来たら、ケーブルごと中の液晶を外に取り出します。ちなみに、中の液晶はシャープ製です。続いて、液晶からケーブルを外します。こちらも、コネクタで繋がっているので、簡単に外せると思います。</p>
	</div>

	<h3>繋ぐ</h3>
	<div class="block">
		<p>外せたら、購入したFFCを同じように繋ぎます。裏表を間違えないように気をつけて下さい。</p>
		<p>上手く繋がったような気がしたら、そのまま電源を入れてみます。メモリカウントが見えたら成功です。ウンともスンともいわないようなら、上手く繋がっていないか、それ以外の部分がお亡くなりになっている可能性があります。結線の確認は念入りに行って下さい。</p>
	</div>

	<h3>組み立てる</h3>
	<div class="block">
		<p>表示が出来たら、一度電源を切り再び組み立てます。本体側のコネクタを外して、液晶側から組み立てていくとやりやすいと思います。液晶が元に戻ったら、ケーブルを本体につないで再び動作確認をします。上手く動いたら、残りの部品を元通り組み立てて、修理完了です。</p>
	</div>
</div>

<h2>充電池駆動計画</h2>
<div class="block">
	<p>R-CARDを充電池で動作させることが出来るのか? 結論から言うと、特別なことを何一つすることなく出来ました。</p>
	<p>使った電池は松下の2400mAhニッケル水素蓄電池です。エネループもOKでした(こちらの方が、放置していても自己放電しないので扱いやすいです)。しかし、低消費電力状態で普通に使っている分には問題ないものの、ICメモリカードにアクセスすると結構な頻度で電池残量警告が出ます(つまり、昇圧がかかった場合ですね)。ニッケル水素電池の放電カーブによれば末期まで1.2V付近で安定しているそうなので、残量警告があまりアテにならない点は注意すべきと思います(つまり、電池切れ寸前で突然例外多発とかが起こる)。</p>
	<p>ニッカド電池やリチウムイオン電池(単三2本の形になっているもの)については、手持ちが無いので検証していません。</p>
</div>

<h2>LANに繋ぐ</h2>
<div class="block">
	<p>R-CARDの後方には拡張スロットが存在するのですが、ここに刺さるLANアダプタ(FM50N-181)が秋葉原のジャンク屋にて\100で販売されているのを見つけてしまい、思わず衝動買いしてしまいました(大汗</p>
	<p>ドライバがあるかどうかも確認せずに買ってしまったのですが、結果的に動作させることが出来ました。但し、LANアダプタには別電源(DC7.5V 3.5W)を供給する必要がある上に、電池駆動時にCPU自動停止状態になると、問答無用でLANアダプタの電源が切断されます。なので、正直実用にはなりません。</p>

	<p>ここでは、参考までにLAN使用の手順について説明します。基本的に「FM-TOWNSにFM50L-186/187を接続してリアルモードで通信を行う」手順と同一です。</p>

	<h3>LANアダプタの入手</h3>
	<div class="block">
		<p>これが無ければ始まりませんね(^^; 私が確認したものはFM50N-181(DSLINKアダプタ 10BASE-T)というものですが、もしかすると他に使えるものがあるかもしれません。頑張って探して下さい。</p>
	</div>

	<h3>ドライバの入手</h3>
	<div class="block">
		<p>まず、DOS用のODSドライバ(FMRLAN.COM)、NetWare環境ドライバ(LSL.COM)が必要です。これらのファイルは、NetWareのFMR用クライアント(FMRWS_2.EXE、FMRWS_1.EXE)に含まれています。昔はネット上からダウンロードできたのですが、現在は配布されていないようです。しかし、NetWareクライアントはWindows NT 3.5(Daytona)のβ版CDなどにも入っており、しかもDaytonaのβ版は当時雑誌の付録として広く流通していましたので、図書館等で当時の国内の雑誌を漁ると見つけることができるかもしれません(手持ちのものは、別にFMR用のDaytonaではありませんでしたが、NetWareのFMR用クライアントが含まれていて、さらに入手困難なFM50L189のドライバまで含まれていたと記憶しています)。とりあえず頑張って見つけてみて下さい。</p>
		<p>ここまできましたら、後は必要なファイルを回収するだけです。LSL.COMはアーカイブを解凍するだけで取り出すことが出来ますが、FMRLAN.COMに関しては解凍後、NWUNPACK.EXEを用いて別途解凍する必要が有ります。解凍は、FMRLAN.CO_とNWUNPACK.EXEを同一ディレクトリに配置したあと、コマンドラインから「NWUNPACK FMRLAN.CO_(Return)」と実行すればOKです。</p>

		<p>続いて、かつてFTOWNSフォーラムのページで公開されていた「TCP/IP for TOWNS」が必要です。以前は同ページにて公開されていたのですが、現在はフォーラムごと閉鎖してしまったので、入手が困難です。私の手元に丁度アーカイブがありますので、もしどうしても欲しいという方がいらっしゃいましたら、<a href="index.html#footer">メール</a>や<a href="http://development-room.bbs.fc2.com/">ゲストブック</a>等で連絡を下さい。これを解凍したら、TCPIPFM\LAN\にFMRLAN.COMとLSL.COMをコピーしておきます。</p>
	</div>

	<h3>ドライバの設定</h3>
	<div class="block">
		<p>TCPIPFM\LAN\のNET.CFGを編集します。三行目の「Int  5」となっているところを、「Int  4」に書き換えておきます。また、TCPIPFM\LAN\のWTTCP.CFGのIPアドレス等を自分の環境に合わせて書き換えます。</p>
	</div>

	<h3>通信</h3>
	<div class="block">
		<p>TCPIPFM\LAN\のUP.BATを立ち上げます。これで、LANの利用が可能になりました。TCPIPFMディレクトリ内にあるEXE版のプログラムであれば、恐らく通信させることが出来ると思います。通信を終了するには、TCPIPFM\LAN\のDOWN.BATを立ち上げます。</p>
	</div>

	<p>このようなところです。丁度良いACアダプタが見つかったので、試しに色々と実験してみたところ、ちゃんとPING等も動作しました。完璧です。同封のソフトはサンプルレベルとのことなので、そこまで色々とできる訳ではありませんが、「TCP/IP for TOWNS」には16ビット版のライブラリが付属しているので、その気になれば色々と面白いことができるかもしれません。</p>
</div>

<h2>ROMの吸い出し</h2>
<div class="block">
	<p>OAKの連文節変換を無効にできないか色々調べているうちに、R-CARD用のROM吸い出しプログラムを作ってしまいました(汗</p>

	<p>ソースと簡易説明書のみのパッケージです。色々解析してみたい方は<A href="./rcard_dump.lzh">どうぞ</A>。</p>
</div>
</div>

<div class="footer">
	<div style="text-align:center"><a href="index.html">トップページ</a></div>
	<div style="text-align:right; font-size:12px">Copyright(c) 2004 聖人(Kiyoto).</div>
</div>

<!-- [FC2 Analyzer] //analyzer.fc2.com/  -->
<script language="javascript" src="//analyzer51.fc2.com/ana/processor.php?uid=2455023" type="text/javascript"></script>
<noscript><div align="right"><img src="//analyzer51.fc2.com/ana/icon.php?uid=2455023&ref=&href=&wid=0&hei=0&col=0" /></div></noscript>
<!-- [FC2 Analyzer]  -->

</body>
</html>

